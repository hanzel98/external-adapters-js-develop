"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AdapterError = void 0;
class AdapterError extends Error {
    constructor({ jobRunID = '1', status = 'errored', statusCode = 500, name = 'AdapterError', message = 'An error occurred.', cause, }) {
        super(message);
        this.jobRunID = jobRunID;
        this.status = status;
        this.statusCode = statusCode;
        this.name = name;
        this.message = message;
        this.cause = cause;
    }
    toJSONResponse() {
        const showDebugInfo = process.env.NODE_ENV === 'development' || process.env.DEBUG === 'true';
        const errorBasic = { name: this.name, message: this.message };
        const errorFull = { ...errorBasic, stack: this.stack, cause: this.cause };
        return {
            jobRunID: this.jobRunID,
            status: this.status,
            statusCode: this.statusCode,
            error: showDebugInfo ? errorFull : errorBasic,
        };
    }
}
exports.AdapterError = AdapterError;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9leHRlcm5hbC1hZGFwdGVyL2Vycm9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxNQUFhLFlBQWEsU0FBUSxLQUFLO0lBUXJDLFlBQVksRUFDVixRQUFRLEdBQUcsR0FBRyxFQUNkLE1BQU0sR0FBRyxTQUFTLEVBQ2xCLFVBQVUsR0FBRyxHQUFHLEVBQ2hCLElBQUksR0FBRyxjQUFjLEVBQ3JCLE9BQU8sR0FBRyxvQkFBb0IsRUFDOUIsS0FBSyxHQUNpQjtRQUN0QixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUE7UUFFZCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQTtRQUM1QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtRQUN0QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQTtJQUNwQixDQUFDO0lBRUQsY0FBYztRQUNaLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLGFBQWEsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssS0FBSyxNQUFNLENBQUE7UUFDNUYsTUFBTSxVQUFVLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQzdELE1BQU0sU0FBUyxHQUFHLEVBQUUsR0FBRyxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUN6RSxPQUFPO1lBQ0wsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1lBQ3ZCLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtZQUNuQixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDM0IsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVO1NBQzlDLENBQUE7SUFDSCxDQUFDO0NBQ0Y7QUFyQ0Qsb0NBcUNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWRhcHRlckVycm9yUmVzcG9uc2UgfSBmcm9tICdAY2hhaW5saW5rL3R5cGVzJ1xuXG5leHBvcnQgY2xhc3MgQWRhcHRlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBqb2JSdW5JRDogc3RyaW5nXG4gIHN0YXR1czogc3RyaW5nXG4gIHN0YXR1c0NvZGU6IG51bWJlclxuICBuYW1lOiBzdHJpbmdcbiAgbWVzc2FnZTogc3RyaW5nXG4gIGNhdXNlOiBhbnlcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgam9iUnVuSUQgPSAnMScsXG4gICAgc3RhdHVzID0gJ2Vycm9yZWQnLFxuICAgIHN0YXR1c0NvZGUgPSA1MDAsXG4gICAgbmFtZSA9ICdBZGFwdGVyRXJyb3InLFxuICAgIG1lc3NhZ2UgPSAnQW4gZXJyb3Igb2NjdXJyZWQuJyxcbiAgICBjYXVzZSxcbiAgfTogUGFydGlhbDxBZGFwdGVyRXJyb3I+KSB7XG4gICAgc3VwZXIobWVzc2FnZSlcblxuICAgIHRoaXMuam9iUnVuSUQgPSBqb2JSdW5JRFxuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZVxuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgdGhpcy5jYXVzZSA9IGNhdXNlXG4gIH1cblxuICB0b0pTT05SZXNwb25zZSgpOiBBZGFwdGVyRXJyb3JSZXNwb25zZSB7XG4gICAgY29uc3Qgc2hvd0RlYnVnSW5mbyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnIHx8IHByb2Nlc3MuZW52LkRFQlVHID09PSAndHJ1ZSdcbiAgICBjb25zdCBlcnJvckJhc2ljID0geyBuYW1lOiB0aGlzLm5hbWUsIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSB9XG4gICAgY29uc3QgZXJyb3JGdWxsID0geyAuLi5lcnJvckJhc2ljLCBzdGFjazogdGhpcy5zdGFjaywgY2F1c2U6IHRoaXMuY2F1c2UgfVxuICAgIHJldHVybiB7XG4gICAgICBqb2JSdW5JRDogdGhpcy5qb2JSdW5JRCxcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNDb2RlOiB0aGlzLnN0YXR1c0NvZGUsXG4gICAgICBlcnJvcjogc2hvd0RlYnVnSW5mbyA/IGVycm9yRnVsbCA6IGVycm9yQmFzaWMsXG4gICAgfVxuICB9XG59XG4iXX0=