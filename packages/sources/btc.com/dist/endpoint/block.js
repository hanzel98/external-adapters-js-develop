"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.execute = exports.inputParameters = exports.endpointResultPaths = exports.supportedEndpoints = void 0;
const ea_bootstrap_1 = require("@chainlink/ea-bootstrap");
exports.supportedEndpoints = ['height', 'difficulty'];
exports.endpointResultPaths = {
    height: 'height',
    difficulty: 'difficulty',
};
exports.inputParameters = {
    resultPath: false,
};
const execute = async (request, _, config) => {
    const validator = new ea_bootstrap_1.Validator(request, exports.inputParameters);
    if (validator.error)
        throw validator.error;
    const jobRunID = validator.validated.id;
    const resultPath = validator.validated.data.resultPath;
    const url = `/v3/block/latest`;
    const options = {
        ...config.api,
        url,
    };
    const response = await ea_bootstrap_1.Requester.request(options);
    response.data.result = ea_bootstrap_1.Requester.validateResultNumber(response.data, [
        'data',
        resultPath,
    ]);
    return ea_bootstrap_1.Requester.success(jobRunID, response, config.verbose);
};
exports.execute = execute;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxvY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZW5kcG9pbnQvYmxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMERBQThEO0FBR2pELFFBQUEsa0JBQWtCLEdBQUcsQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUE7QUFFN0MsUUFBQSxtQkFBbUIsR0FBd0I7SUFDdEQsTUFBTSxFQUFFLFFBQVE7SUFDaEIsVUFBVSxFQUFFLFlBQVk7Q0FDekIsQ0FBQTtBQW9DWSxRQUFBLGVBQWUsR0FBb0I7SUFDOUMsVUFBVSxFQUFFLEtBQUs7Q0FDbEIsQ0FBQTtBQUVNLE1BQU0sT0FBTyxHQUE4QixLQUFLLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRTtJQUM3RSxNQUFNLFNBQVMsR0FBRyxJQUFJLHdCQUFTLENBQUMsT0FBTyxFQUFFLHVCQUFlLENBQUMsQ0FBQTtJQUN6RCxJQUFJLFNBQVMsQ0FBQyxLQUFLO1FBQUUsTUFBTSxTQUFTLENBQUMsS0FBSyxDQUFBO0lBRTFDLE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFBO0lBQ3ZDLE1BQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQTtJQUN0RCxNQUFNLEdBQUcsR0FBRyxrQkFBa0IsQ0FBQTtJQUU5QixNQUFNLE9BQU8sR0FBRztRQUNkLEdBQUcsTUFBTSxDQUFDLEdBQUc7UUFDYixHQUFHO0tBQ0osQ0FBQTtJQUVELE1BQU0sUUFBUSxHQUFHLE1BQU0sd0JBQVMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFFakQsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsd0JBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsSUFBc0IsRUFBRTtRQUNyRixNQUFNO1FBQ04sVUFBVTtLQUNYLENBQUMsQ0FBQTtJQUVGLE9BQU8sd0JBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7QUFDOUQsQ0FBQyxDQUFBO0FBckJZLFFBQUEsT0FBTyxXQXFCbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0ZXIsIFZhbGlkYXRvciB9IGZyb20gJ0BjaGFpbmxpbmsvZWEtYm9vdHN0cmFwJ1xuaW1wb3J0IHsgRXhlY3V0ZVdpdGhDb25maWcsIENvbmZpZywgSW5wdXRQYXJhbWV0ZXJzLCBFbmRwb2ludFJlc3VsdFBhdGhzIH0gZnJvbSAnQGNoYWlubGluay90eXBlcydcblxuZXhwb3J0IGNvbnN0IHN1cHBvcnRlZEVuZHBvaW50cyA9IFsnaGVpZ2h0JywgJ2RpZmZpY3VsdHknXVxuXG5leHBvcnQgY29uc3QgZW5kcG9pbnRSZXN1bHRQYXRoczogRW5kcG9pbnRSZXN1bHRQYXRocyA9IHtcbiAgaGVpZ2h0OiAnaGVpZ2h0JyxcbiAgZGlmZmljdWx0eTogJ2RpZmZpY3VsdHknLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNlU2NoZW1hIHtcbiAgZGF0YToge1xuICAgIGhlaWdodDogbnVtYmVyXG4gICAgdmVyc2lvbjogbnVtYmVyXG4gICAgbXJrbF9yb290OiBzdHJpbmdcbiAgICB0aW1lc3RhbXA6IG51bWJlclxuICAgIGJpdHM6IG51bWJlclxuICAgIG5vbmNlOiBudW1iZXJcbiAgICBoYXNoOiBzdHJpbmdcbiAgICBwcmV2X2Jsb2NrX2hhc2g6IHN0cmluZ1xuICAgIG5leHRfYmxvY2tfaGFzaDogc3RyaW5nXG4gICAgc2l6ZTogbnVtYmVyXG4gICAgcG9vbF9kaWZmaWN1bHR5OiBudW1iZXJcbiAgICBkaWZmaWN1bHR5OiBudW1iZXJcbiAgICBkaWZmaWN1bHR5X2RvdWJsZTogbnVtYmVyXG4gICAgdHhfY291bnQ6IG51bWJlclxuICAgIHJld2FyZF9ibG9jazogbnVtYmVyXG4gICAgcmV3YXJkX2ZlZXM6IG51bWJlclxuICAgIGNvbmZpcm1hdGlvbnM6IG51bWJlclxuICAgIGlzX29ycGhhbjogYm9vbGVhblxuICAgIGN1cnJfbWF4X3RpbWVzdGFtcDogbnVtYmVyXG4gICAgaXNfc3dfYmxvY2s6IGJvb2xlYW5cbiAgICBzdHJpcHBlZF9zaXplOiBudW1iZXJcbiAgICBzaWdvcHM6IG51bWJlclxuICAgIHdlaWdodDogbnVtYmVyXG4gICAgZXh0cmFzOiB7IHBvb2xfbmFtZTogc3RyaW5nOyBwb29sX2xpbms6IHN0cmluZyB9XG4gIH1cblxuICBlcnJfY29kZTogbnVtYmVyXG4gIGVycl9ubzogbnVtYmVyXG4gIG1lc3NhZ2U6IHN0cmluZ1xuICBzdGF0dXM6IHN0cmluZ1xufVxuXG5leHBvcnQgY29uc3QgaW5wdXRQYXJhbWV0ZXJzOiBJbnB1dFBhcmFtZXRlcnMgPSB7XG4gIHJlc3VsdFBhdGg6IGZhbHNlLFxufVxuXG5leHBvcnQgY29uc3QgZXhlY3V0ZTogRXhlY3V0ZVdpdGhDb25maWc8Q29uZmlnPiA9IGFzeW5jIChyZXF1ZXN0LCBfLCBjb25maWcpID0+IHtcbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRvcihyZXF1ZXN0LCBpbnB1dFBhcmFtZXRlcnMpXG4gIGlmICh2YWxpZGF0b3IuZXJyb3IpIHRocm93IHZhbGlkYXRvci5lcnJvclxuXG4gIGNvbnN0IGpvYlJ1bklEID0gdmFsaWRhdG9yLnZhbGlkYXRlZC5pZFxuICBjb25zdCByZXN1bHRQYXRoID0gdmFsaWRhdG9yLnZhbGlkYXRlZC5kYXRhLnJlc3VsdFBhdGhcbiAgY29uc3QgdXJsID0gYC92My9ibG9jay9sYXRlc3RgXG5cbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAuLi5jb25maWcuYXBpLFxuICAgIHVybCxcbiAgfVxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUmVxdWVzdGVyLnJlcXVlc3Qob3B0aW9ucylcblxuICByZXNwb25zZS5kYXRhLnJlc3VsdCA9IFJlcXVlc3Rlci52YWxpZGF0ZVJlc3VsdE51bWJlcihyZXNwb25zZS5kYXRhIGFzIFJlc3BvbnNlU2NoZW1hLCBbXG4gICAgJ2RhdGEnLFxuICAgIHJlc3VsdFBhdGgsXG4gIF0pXG5cbiAgcmV0dXJuIFJlcXVlc3Rlci5zdWNjZXNzKGpvYlJ1bklELCByZXNwb25zZSwgY29uZmlnLnZlcmJvc2UpXG59XG4iXX0=