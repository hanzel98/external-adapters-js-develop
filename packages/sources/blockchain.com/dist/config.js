"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeConfig = exports.getBaseURL = exports.isChainType = exports.CHAIN_KEYS = exports.isCoinType = exports.COIN_KEYS = exports.DEFAULT_ENDPOINT = exports.DEFAULT_TIMEOUT = exports.API_ENDPOINT_TEST = exports.API_ENDPOINT_MAIN = exports.ENV_API_TIMEOUT = exports.ENV_API_KEY = exports.NAME = void 0;
const ea_bootstrap_1 = require("@chainlink/ea-bootstrap");
exports.NAME = 'BLOCKCHAIN_COM';
exports.ENV_API_KEY = 'API_KEY';
exports.ENV_API_TIMEOUT = 'API_TIMEOUT';
exports.API_ENDPOINT_MAIN = 'https://blockchain.info/';
exports.API_ENDPOINT_TEST = 'https://testnet.blockchain.info/';
exports.DEFAULT_TIMEOUT = 30000;
exports.DEFAULT_ENDPOINT = 'balance';
exports.COIN_KEYS = ['btc'];
function isCoinType(key) {
    return exports.COIN_KEYS.includes(key);
}
exports.isCoinType = isCoinType;
exports.CHAIN_KEYS = ['mainnet', 'testnet'];
function isChainType(key) {
    return exports.CHAIN_KEYS.includes(key);
}
exports.isChainType = isChainType;
const getBaseURL = (chain) => {
    switch (chain) {
        case 'mainnet':
        default:
            return exports.API_ENDPOINT_MAIN;
        case 'testnet':
            return exports.API_ENDPOINT_TEST;
    }
};
exports.getBaseURL = getBaseURL;
const makeConfig = (prefix = '') => ({
    apiKey: ea_bootstrap_1.util.getEnv(exports.ENV_API_KEY, prefix),
    returnRejectedPromiseOnError: true,
    api: {
        withCredentials: true,
        timeout: parseInt(ea_bootstrap_1.util.getEnv(exports.ENV_API_TIMEOUT, prefix)) || exports.DEFAULT_TIMEOUT,
        headers: {
            common: {
                'Cache-Control': 'no-cache, no-store, must-revalidate',
                Pragma: 'no-cache',
                'Content-Type': 'application/json',
                Accept: 'application/json',
            },
        },
        params: {
            key: ea_bootstrap_1.util.getEnv(exports.ENV_API_KEY, prefix),
        },
    },
    defaultEndpoint: exports.DEFAULT_ENDPOINT,
});
exports.makeConfig = makeConfig;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NvbmZpZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwwREFBOEM7QUFHakMsUUFBQSxJQUFJLEdBQUcsZ0JBQWdCLENBQUE7QUFFdkIsUUFBQSxXQUFXLEdBQUcsU0FBUyxDQUFBO0FBQ3ZCLFFBQUEsZUFBZSxHQUFHLGFBQWEsQ0FBQTtBQUUvQixRQUFBLGlCQUFpQixHQUFHLDBCQUEwQixDQUFBO0FBQzlDLFFBQUEsaUJBQWlCLEdBQUcsa0NBQWtDLENBQUE7QUFFdEQsUUFBQSxlQUFlLEdBQUcsS0FBSyxDQUFBO0FBQ3ZCLFFBQUEsZ0JBQWdCLEdBQUcsU0FBUyxDQUFBO0FBRTVCLFFBQUEsU0FBUyxHQUFHLENBQUMsS0FBSyxDQUFVLENBQUE7QUFFekMsU0FBZ0IsVUFBVSxDQUFDLEdBQVc7SUFDcEMsT0FBTyxpQkFBUyxDQUFDLFFBQVEsQ0FBQyxHQUFlLENBQUMsQ0FBQTtBQUM1QyxDQUFDO0FBRkQsZ0NBRUM7QUFDWSxRQUFBLFVBQVUsR0FBRyxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQVUsQ0FBQTtBQUV6RCxTQUFnQixXQUFXLENBQUMsR0FBVztJQUNyQyxPQUFPLGtCQUFVLENBQUMsUUFBUSxDQUFDLEdBQWdCLENBQUMsQ0FBQTtBQUM5QyxDQUFDO0FBRkQsa0NBRUM7QUFFTSxNQUFNLFVBQVUsR0FBRyxDQUFDLEtBQWdCLEVBQVUsRUFBRTtJQUNyRCxRQUFRLEtBQUssRUFBRTtRQUNiLEtBQUssU0FBUyxDQUFDO1FBQ2Y7WUFDRSxPQUFPLHlCQUFpQixDQUFBO1FBQzFCLEtBQUssU0FBUztZQUNaLE9BQU8seUJBQWlCLENBQUE7S0FDM0I7QUFDSCxDQUFDLENBQUE7QUFSWSxRQUFBLFVBQVUsY0FRdEI7QUFFTSxNQUFNLFVBQVUsR0FBRyxDQUFDLE1BQU0sR0FBRyxFQUFFLEVBQVUsRUFBRSxDQUFDLENBQUM7SUFDbEQsTUFBTSxFQUFFLG1CQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFXLEVBQUUsTUFBTSxDQUFDO0lBQ3hDLDRCQUE0QixFQUFFLElBQUk7SUFDbEMsR0FBRyxFQUFFO1FBQ0gsZUFBZSxFQUFFLElBQUk7UUFDckIsT0FBTyxFQUFFLFFBQVEsQ0FBQyxtQkFBSSxDQUFDLE1BQU0sQ0FBQyx1QkFBZSxFQUFFLE1BQU0sQ0FBVyxDQUFDLElBQUksdUJBQWU7UUFDcEYsT0FBTyxFQUFFO1lBQ1AsTUFBTSxFQUFFO2dCQUNOLGVBQWUsRUFBRSxxQ0FBcUM7Z0JBQ3RELE1BQU0sRUFBRSxVQUFVO2dCQUNsQixjQUFjLEVBQUUsa0JBQWtCO2dCQUNsQyxNQUFNLEVBQUUsa0JBQWtCO2FBQzNCO1NBQ0Y7UUFDRCxNQUFNLEVBQUU7WUFDTixHQUFHLEVBQUUsbUJBQUksQ0FBQyxNQUFNLENBQUMsbUJBQVcsRUFBRSxNQUFNLENBQUM7U0FDdEM7S0FDRjtJQUNELGVBQWUsRUFBRSx3QkFBZ0I7Q0FDbEMsQ0FBQyxDQUFBO0FBbkJXLFFBQUEsVUFBVSxjQW1CckIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dGlsIH0gZnJvbSAnQGNoYWlubGluay9lYS1ib290c3RyYXAnXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tICdAY2hhaW5saW5rL3R5cGVzJ1xuXG5leHBvcnQgY29uc3QgTkFNRSA9ICdCTE9DS0NIQUlOX0NPTSdcblxuZXhwb3J0IGNvbnN0IEVOVl9BUElfS0VZID0gJ0FQSV9LRVknXG5leHBvcnQgY29uc3QgRU5WX0FQSV9USU1FT1VUID0gJ0FQSV9USU1FT1VUJ1xuXG5leHBvcnQgY29uc3QgQVBJX0VORFBPSU5UX01BSU4gPSAnaHR0cHM6Ly9ibG9ja2NoYWluLmluZm8vJ1xuZXhwb3J0IGNvbnN0IEFQSV9FTkRQT0lOVF9URVNUID0gJ2h0dHBzOi8vdGVzdG5ldC5ibG9ja2NoYWluLmluZm8vJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9USU1FT1VUID0gMzAwMDBcbmV4cG9ydCBjb25zdCBERUZBVUxUX0VORFBPSU5UID0gJ2JhbGFuY2UnXG5cbmV4cG9ydCBjb25zdCBDT0lOX0tFWVMgPSBbJ2J0YyddIGFzIGNvbnN0XG5leHBvcnQgdHlwZSBDb2luVHlwZSA9IHR5cGVvZiBDT0lOX0tFWVNbbnVtYmVyXVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29pblR5cGUoa2V5OiBzdHJpbmcpOiBrZXkgaXMgQ29pblR5cGUge1xuICByZXR1cm4gQ09JTl9LRVlTLmluY2x1ZGVzKGtleSBhcyBDb2luVHlwZSlcbn1cbmV4cG9ydCBjb25zdCBDSEFJTl9LRVlTID0gWydtYWlubmV0JywgJ3Rlc3RuZXQnXSBhcyBjb25zdFxuZXhwb3J0IHR5cGUgQ2hhaW5UeXBlID0gdHlwZW9mIENIQUlOX0tFWVNbbnVtYmVyXVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hhaW5UeXBlKGtleTogc3RyaW5nKToga2V5IGlzIENoYWluVHlwZSB7XG4gIHJldHVybiBDSEFJTl9LRVlTLmluY2x1ZGVzKGtleSBhcyBDaGFpblR5cGUpXG59XG5cbmV4cG9ydCBjb25zdCBnZXRCYXNlVVJMID0gKGNoYWluOiBDaGFpblR5cGUpOiBzdHJpbmcgPT4ge1xuICBzd2l0Y2ggKGNoYWluKSB7XG4gICAgY2FzZSAnbWFpbm5ldCc6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBBUElfRU5EUE9JTlRfTUFJTlxuICAgIGNhc2UgJ3Rlc3RuZXQnOlxuICAgICAgcmV0dXJuIEFQSV9FTkRQT0lOVF9URVNUXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1ha2VDb25maWcgPSAocHJlZml4ID0gJycpOiBDb25maWcgPT4gKHtcbiAgYXBpS2V5OiB1dGlsLmdldEVudihFTlZfQVBJX0tFWSwgcHJlZml4KSxcbiAgcmV0dXJuUmVqZWN0ZWRQcm9taXNlT25FcnJvcjogdHJ1ZSxcbiAgYXBpOiB7XG4gICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgIHRpbWVvdXQ6IHBhcnNlSW50KHV0aWwuZ2V0RW52KEVOVl9BUElfVElNRU9VVCwgcHJlZml4KSBhcyBzdHJpbmcpIHx8IERFRkFVTFRfVElNRU9VVCxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBjb21tb246IHtcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnLFxuICAgICAgICBQcmFnbWE6ICduby1jYWNoZScsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHBhcmFtczoge1xuICAgICAga2V5OiB1dGlsLmdldEVudihFTlZfQVBJX0tFWSwgcHJlZml4KSxcbiAgICB9LFxuICB9LFxuICBkZWZhdWx0RW5kcG9pbnQ6IERFRkFVTFRfRU5EUE9JTlQsXG59KVxuIl19