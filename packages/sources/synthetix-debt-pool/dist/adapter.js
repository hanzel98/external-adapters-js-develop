"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeExecute = exports.execute = void 0;
const tslib_1 = require("tslib");
const config_1 = require("./config");
const endpoints = tslib_1.__importStar(require("./endpoint"));
const ea_bootstrap_1 = require("@chainlink/ea-bootstrap");
const execute = async (request, context, config) => {
    const validator = new ea_bootstrap_1.Validator(request);
    if (validator.error)
        throw validator.error;
    ea_bootstrap_1.Requester.logConfig(config);
    return await endpoints.debt.execute(request, context, config);
};
exports.execute = execute;
const makeExecute = (config) => {
    return async (request, context) => exports.execute(request, context, config || config_1.makeConfig());
};
exports.makeExecute = makeExecute;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRhcHRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9hZGFwdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxxQ0FBOEQ7QUFDOUQsOERBQXVDO0FBQ3ZDLDBEQUE4RDtBQUV2RCxNQUFNLE9BQU8sR0FBRyxLQUFLLEVBQzFCLE9BQXVCLEVBQ3ZCLE9BQXVCLEVBQ3ZCLE1BQXFCLEVBQ0ssRUFBRTtJQUM1QixNQUFNLFNBQVMsR0FBRyxJQUFJLHdCQUFTLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDeEMsSUFBSSxTQUFTLENBQUMsS0FBSztRQUFFLE1BQU0sU0FBUyxDQUFDLEtBQUssQ0FBQTtJQUMxQyx3QkFBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUMzQixPQUFPLE1BQU0sU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQTtBQUMvRCxDQUFDLENBQUE7QUFUWSxRQUFBLE9BQU8sV0FTbkI7QUFFTSxNQUFNLFdBQVcsR0FBRyxDQUFDLE1BQXNCLEVBQVcsRUFBRTtJQUM3RCxPQUFPLEtBQUssRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxlQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLElBQUksbUJBQVUsRUFBRSxDQUFDLENBQUE7QUFDdEYsQ0FBQyxDQUFBO0FBRlksUUFBQSxXQUFXLGVBRXZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWRhcHRlclJlc3BvbnNlLCBBZGFwdGVyQ29udGV4dCwgRXhlY3V0ZSwgQWRhcHRlclJlcXVlc3QgfSBmcm9tICdAY2hhaW5saW5rL3R5cGVzJ1xuaW1wb3J0IHsgbWFrZUNvbmZpZywgQ29uZmlnIGFzIEFkYXB0ZXJDb25maWcgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCAqIGFzIGVuZHBvaW50cyBmcm9tICcuL2VuZHBvaW50J1xuaW1wb3J0IHsgUmVxdWVzdGVyLCBWYWxpZGF0b3IgfSBmcm9tICdAY2hhaW5saW5rL2VhLWJvb3RzdHJhcCdcblxuZXhwb3J0IGNvbnN0IGV4ZWN1dGUgPSBhc3luYyAoXG4gIHJlcXVlc3Q6IEFkYXB0ZXJSZXF1ZXN0LFxuICBjb250ZXh0OiBBZGFwdGVyQ29udGV4dCxcbiAgY29uZmlnOiBBZGFwdGVyQ29uZmlnLFxuKTogUHJvbWlzZTxBZGFwdGVyUmVzcG9uc2U+ID0+IHtcbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRvcihyZXF1ZXN0KVxuICBpZiAodmFsaWRhdG9yLmVycm9yKSB0aHJvdyB2YWxpZGF0b3IuZXJyb3JcbiAgUmVxdWVzdGVyLmxvZ0NvbmZpZyhjb25maWcpXG4gIHJldHVybiBhd2FpdCBlbmRwb2ludHMuZGVidC5leGVjdXRlKHJlcXVlc3QsIGNvbnRleHQsIGNvbmZpZylcbn1cblxuZXhwb3J0IGNvbnN0IG1ha2VFeGVjdXRlID0gKGNvbmZpZz86IEFkYXB0ZXJDb25maWcpOiBFeGVjdXRlID0+IHtcbiAgcmV0dXJuIGFzeW5jIChyZXF1ZXN0LCBjb250ZXh0KSA9PiBleGVjdXRlKHJlcXVlc3QsIGNvbnRleHQsIGNvbmZpZyB8fCBtYWtlQ29uZmlnKCkpXG59XG4iXX0=