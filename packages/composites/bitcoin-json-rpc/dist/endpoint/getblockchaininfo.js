"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.execute = exports.NAME = void 0;
const tslib_1 = require("tslib");
const json_rpc_adapter_1 = tslib_1.__importDefault(require("@chainlink/json-rpc-adapter"));
const ea_bootstrap_1 = require("@chainlink/ea-bootstrap");
exports.NAME = 'getblockchaininfo';
const DEFAULT_FIELD = 'difficulty';
const inputParams = {
    resultPath: false,
};
const execute = async (request, context, config) => {
    const validator = new ea_bootstrap_1.Validator(request, inputParams);
    if (validator.error)
        throw validator.error;
    const jobRunID = validator.validated.id;
    const resultPath = validator.validated.data.endpoint == DEFAULT_FIELD
        ? DEFAULT_FIELD
        : validator.validated.data.resultPath || DEFAULT_FIELD;
    const response = await json_rpc_adapter_1.default.execute({
        ...request,
        data: { ...request.data, method: exports.NAME },
    }, context, config);
    response.data.result = ea_bootstrap_1.Requester.validateResultNumber(response.data, ['result', resultPath]);
    return ea_bootstrap_1.Requester.success(jobRunID, response);
};
exports.execute = execute;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0YmxvY2tjaGFpbmluZm8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZW5kcG9pbnQvZ2V0YmxvY2tjaGFpbmluZm8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLDJGQUFpRDtBQUVqRCwwREFBOEQ7QUFFakQsUUFBQSxJQUFJLEdBQUcsbUJBQW1CLENBQUE7QUFDdkMsTUFBTSxhQUFhLEdBQUcsWUFBWSxDQUFBO0FBRWxDLE1BQU0sV0FBVyxHQUFHO0lBQ2xCLFVBQVUsRUFBRSxLQUFLO0NBQ2xCLENBQUE7QUFFTSxNQUFNLE9BQU8sR0FBOEIsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7SUFDbkYsTUFBTSxTQUFTLEdBQUcsSUFBSSx3QkFBUyxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQTtJQUNyRCxJQUFJLFNBQVMsQ0FBQyxLQUFLO1FBQUUsTUFBTSxTQUFTLENBQUMsS0FBSyxDQUFBO0lBRTFDLE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFBO0lBQ3ZDLE1BQU0sVUFBVSxHQUNkLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxhQUFhO1FBQ2hELENBQUMsQ0FBQyxhQUFhO1FBQ2YsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxhQUFhLENBQUE7SUFFMUQsTUFBTSxRQUFRLEdBQUcsTUFBTSwwQkFBTyxDQUFDLE9BQU8sQ0FDcEM7UUFDRSxHQUFHLE9BQU87UUFDVixJQUFJLEVBQUUsRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLFlBQUksRUFBRTtLQUN4QyxFQUNELE9BQU8sRUFDUCxNQUFNLENBQ1AsQ0FBQTtJQUVELFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLHdCQUFTLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFBO0lBQzVGLE9BQU8sd0JBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFBO0FBQzlDLENBQUMsQ0FBQTtBQXJCWSxRQUFBLE9BQU8sV0FxQm5CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpTT05SUEMgZnJvbSAnQGNoYWlubGluay9qc29uLXJwYy1hZGFwdGVyJ1xuaW1wb3J0IHsgQ29uZmlnLCBFeGVjdXRlV2l0aENvbmZpZyB9IGZyb20gJ0BjaGFpbmxpbmsvdHlwZXMnXG5pbXBvcnQgeyBWYWxpZGF0b3IsIFJlcXVlc3RlciB9IGZyb20gJ0BjaGFpbmxpbmsvZWEtYm9vdHN0cmFwJ1xuXG5leHBvcnQgY29uc3QgTkFNRSA9ICdnZXRibG9ja2NoYWluaW5mbydcbmNvbnN0IERFRkFVTFRfRklFTEQgPSAnZGlmZmljdWx0eSdcblxuY29uc3QgaW5wdXRQYXJhbXMgPSB7XG4gIHJlc3VsdFBhdGg6IGZhbHNlLFxufVxuXG5leHBvcnQgY29uc3QgZXhlY3V0ZTogRXhlY3V0ZVdpdGhDb25maWc8Q29uZmlnPiA9IGFzeW5jIChyZXF1ZXN0LCBjb250ZXh0LCBjb25maWcpID0+IHtcbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRvcihyZXF1ZXN0LCBpbnB1dFBhcmFtcylcbiAgaWYgKHZhbGlkYXRvci5lcnJvcikgdGhyb3cgdmFsaWRhdG9yLmVycm9yXG5cbiAgY29uc3Qgam9iUnVuSUQgPSB2YWxpZGF0b3IudmFsaWRhdGVkLmlkXG4gIGNvbnN0IHJlc3VsdFBhdGggPVxuICAgIHZhbGlkYXRvci52YWxpZGF0ZWQuZGF0YS5lbmRwb2ludCA9PSBERUZBVUxUX0ZJRUxEXG4gICAgICA/IERFRkFVTFRfRklFTERcbiAgICAgIDogdmFsaWRhdG9yLnZhbGlkYXRlZC5kYXRhLnJlc3VsdFBhdGggfHwgREVGQVVMVF9GSUVMRFxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgSlNPTlJQQy5leGVjdXRlKFxuICAgIHtcbiAgICAgIC4uLnJlcXVlc3QsXG4gICAgICBkYXRhOiB7IC4uLnJlcXVlc3QuZGF0YSwgbWV0aG9kOiBOQU1FIH0sXG4gICAgfSxcbiAgICBjb250ZXh0LFxuICAgIGNvbmZpZyxcbiAgKVxuXG4gIHJlc3BvbnNlLmRhdGEucmVzdWx0ID0gUmVxdWVzdGVyLnZhbGlkYXRlUmVzdWx0TnVtYmVyKHJlc3BvbnNlLmRhdGEsIFsncmVzdWx0JywgcmVzdWx0UGF0aF0pXG4gIHJldHVybiBSZXF1ZXN0ZXIuc3VjY2Vzcyhqb2JSdW5JRCwgcmVzcG9uc2UpXG59XG4iXX0=